<style>
/* --- FIX LOGO --- */
.site-logo { 
    height: 40px !important; 
    width: 40px !important; 
    border-radius: 50%; 
    object-fit: cover; 
}

/* --- AFFICHAGE DU DÉCOR EN ENTIER --- */
.preview-scene { 
    position: relative; 
    width: 100%; 
    height: 65vh; /* Hauteur stable */
    background: #000;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    overflow: hidden;
}

.main-display-image { 
    max-width: 95%; 
    max-height: 90%; 
    object-fit: contain; /* GARANTIT QUE L'IMAGE N'EST PAS COUPÉE */
    transition: opacity 0.3s ease-in-out;
}
</style>

<script>
let currentId = '011';
let currentFormat = 'grand';

function setFormat(format) {
    currentFormat = format;
    document.getElementById('btn-grand').classList.toggle('active', format === 'grand');
    document.getElementById('btn-petit').classList.toggle('active', format === 'petit');
    updatePreview();
}

function selectTableau(id) {
    currentId = id;
    document.querySelectorAll('.vignette-item').forEach(v => v.classList.remove('selected'));
    const active = document.getElementById('v-' + id);
    if(active) active.classList.add('selected');
    updatePreview();
}

function updatePreview() {
    const mainView = document.getElementById('main-view');
    mainView.style.opacity = 0;

    // SOLUTION POUR LES BUGS DE NOMMAGE :
    // On définit le nom sans extension d'abord
    const basePath = `assets/images/decor-${currentId}-${currentFormat}`;
    
    // On crée un test pour les deux types d'extensions possibles (.jpg et .JPG)
    // car vos fichiers sont mélangés dans le dossier images.
    const imgJPG = new Image();
    const imgjpg = new Image();
    
    imgJPG.src = basePath + '.JPG';
    imgjpg.src = basePath + '.jpg';

    setTimeout(() => {
        // On vérifie laquelle a chargé
        if (imgJPG.complete && imgJPG.naturalWidth !== 0) {
            mainView.src = basePath + '.JPG';
        } else {
            mainView.src = basePath + '.jpg';
        }
        mainView.style.opacity = 1;
    }, 250);
}
</script>
